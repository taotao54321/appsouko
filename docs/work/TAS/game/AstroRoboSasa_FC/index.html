<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title>アストロロボSASA(FC) TAS</title>
</head>

<body>

<h1>アストロロボSASA(FC) TAS</h1>

<p>とりあえず適当なテストランを作成。まだまだ改善の余地があります。</p>

<p>テストラン 04:58.41 (<a href="Sasa-17934F-Done.zip">fm2ファイル</a>)</p>
<iframe width="312" height="176" src="http://ext.nicovideo.jp/thumb/sm8082772" scrolling="no" style="border:solid 1px #CCC;" frameborder="0"><a href="http://www.nicovideo.jp/watch/sm8082772">【ニコニコ動画】[TAS] FC アストロロボSASA in 04:58.41 (testrun)</a></iframe>

<p>基本的に壁抜けゲーです。ただ、16面は当たり判定を表示させるとわかるようにE
カプセルがかなり奥深くに埋まっており、しかも壁が二重になっているため、壁抜け
を使うのは難しいかも。</p>

<p>16面はキャラ数が多いので、隕石を撃ってキャラオーバーさせられないかと妄想
中です(キャラオーバーしたとしても役に立つかは不明ですが)。</p>


<h2>各種調査</h2>

<p>容量の小さいゲームなので、ROMマップを参照しつつソースコードを読む方が手っ
取り早いかも。</p>

<h3>座標計算</h3>

<p>このゲームの座標計算はピクセル/サブピクセル方式ではなく、フレームカウンタ
が特定の値になったときに速度に応じて一定の値が座標に加えられる方式になってい
ます(詳細未調査。浮力や重力についてもまとめる必要あり)。</p>

<p>一般に、面開始時のフレームカウンタの値はまちまちなので、同じ地形の面で同
じ操作をしても軌道が微妙に異なる場合があります。</p>

<p>また、ラグが発生した場合も軌道が微妙に変化することがあるようです。例えば、
上撃ちと上下同時押し撃ちはどちらも下に進みますが、どちらを選ぶかによってラグ
がわずかに変化することがあり、その場合、動きも微妙に変化します。</p>

<h3>オブジェクト間の衝突</h3>

<p>1Pと2Pが衝突すると速度が入れ替わります。また、敵にぶつかるとダメージ値が
30になります。</p>

<p>自機と破壊可能壁が衝突すると速度が反転します。破壊不能壁にぶつかった場合
は、速度が減衰+反転するようです。</p>

<h3>7～9面の敵ロボの動き</h3>

<p>敵ロボのワープ先は1P/2Pのエネルギー下2桁、およびフレームカウンタに依存し
ます。つまり、事前に空撃ちを行っておくことで動きを調整できます。</p>

<p>なお、敵ロボはワープする際に必ず方向転換します。</p>


<h2>テクニック</h2>

<p>今のところ壁抜けできるのは破壊可能壁のみ(破壊不能壁を抜ける方法は見つかっ
ていません)。</p>

<h3>上下/左右同時押し</h3>

<p>上下同時押しで下に撃ちつつ下に、左右同時押しで左に撃ちつつ下に進めます。
他の組み合わせも全て試しましたが、これ以外のパターンは見つかりませんでした。
つまり自機の向きは実質6通りあるということになります。</p>

<h3>2P壁抜け</h3>

<p>破壊可能壁には一瞬だけ数ピクセルめり込むことができるので、めり込んだ瞬間
に相方が接触して速度を交換すれば、跳ね返りの速度が打ち消されて壁の中にとどま
ることができます。後は適当にショットを撃つなどすれば壁抜け可能(4～6面の場合
は、下に足場があるので普通に歩けるようです。また、歩いている間に上下撃ちを織
り交ぜると若干速くなるかも)。</p>

<h3>単独壁抜け</h3>

<p>これは今のところ原理をきちんと把握していないのですが、おそらく壁にめり込
んだ瞬間に浮力/重力によって跳ね返りの速度が減衰することで壁の中にとどまる、
という仕組みではないかと考えています。実際、無重力面(13～15面)では成功してい
ません。</p>

<p>単独壁抜けの場合、相方がショットを撃って後押しすることができないので、2P
壁抜けよりも時間がかかります。</p>

<p>テストランでは12面の単独壁抜けが遅いですが、これはおそらく右端を通ってい
るために海流によって右の破壊不能壁にしばしば衝突し、速度が減衰させられている
ためではないかと思われます。なるべく左端からめり込むようにすべきかも?</p>

<h3>ポーズ技</h3>

<p>ポーズ中もフレームカウンタは回り続けるので、ポーズを織り交ぜることにより
微妙に動きを変化させることができます。壁抜け中に使えば短縮になるケースがある
かも。</p>

<p>また、1～3面でダメージを受けている間にポーズして即解除するとBGMが鳴らなく
なる現象が確認されています(他の面は未確認)。もしかしたらラグ軽減に役立つかも。</p>

<p>追記: 2面において特定のタイミングで風船を割ってEカプセルを落下させると、
ポーズをかけなくてもBGMが停止する現象が確認されました。</p>


<h2>その他</h2>

<p>EDで4桁の数字が表示されます。この数字とスコアをハガキに書き、付属の応募券
と一緒にメーカーに送ると、抽選で記念品がもらえたようです(情報提供してくれた
方ありがとうございます)。なお、この4桁の数字は10通り存在し、(1Pスコア百の位)
+ (2Pスコア百の位) を10で割った余りに依存します。以下に対応表を示します:</p>
<blockquote><pre>
0       7111
1       8080
2       5137
3       8087
4       5140
5       6502
6       1635
7       1401
8       5225
9       6101
</pre></blockquote>


<h2>資料</h2>

<ul>
  <li><a href="/appsouko/work/GameManual/AstroRoboSasa_FC/">取扱説明書</a></li>
  <li><a href="Sasa-hitbox.lua">当たり判定などを表示するLuaスクリプト</a>
  (<a href="Sasa-hitbox.png">スクリーンショット</a>)</li>
  <li><a href="memory.txt">メモリマップ</a></li>
  <li><a href="rom.txt">ROMマップ</a></li>
  <li><a href="struct.txt">データ構造</a></li>
  <li><a href="/appsouko/work/CDL/pub/">CDLファイル</a></li>
</ul>


<hr>

<p><a href="../../">Back</a></p>

</body>
</html>
